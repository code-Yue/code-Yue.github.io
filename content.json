[{"title":"C++流之读写文本文件","date":"2021-06-05T01:45:54.000Z","path":"2021/06/05/C-流之读写文本文件/","text":"​ C++输入输出是基于流的概念。输入流是数据的源，输出流是数据的目标，下来介绍文件输入输出流。 文件流的类型和头文件 文件流有三种类型： 用于输入：ifstream 用于输出：ofstream 即可用于输入也可用于输出：fstream 当使用三种文件流的任何一个时，头文件均为 &lt;fstream&gt; 打开和关闭文件流，并判断是否打开成功 打开文件流 打开输入文件流： 12ifstream in_file;in_file.open(&quot;input.txt&quot;); 这里的 in_file 是文件输入流的一个对象，对于标准输入流 cin 的用法在其上完全适用。 其中open是其一个成员函数，使用点记号来进行调用。 input.txt 是储存在源文件下名为”input“的一个文本文档，里面的内容用于以后的输入。 打开输出文件流： 12ofstream out_file;out_file.open(&quot;output.txt&quot;); 这里的 out_file 是文件输出流的一个对象，对于标准输出流 cout 的用法在其上完全适用。 其中open是其一个成员函数，使用点记号来进行调用。 output.txt 是一个输出文件，使用上述语句时会在源文件中生成一个名为”output“的文本文档，输出的内容皆在这里显示。 判断是否成功打开输入文件流12345678910ifstream in_file;in_file.open(&quot;input.txt&quot;);if(in_file.fail())&#123;​ cout&lt;&lt; &quot;Can&#x27;t open input.txt&quot;&lt;&lt;endl;&#125;else&#123;​ 读取输入&#125; 注：这里的in_file.fail() 中的fail 是一个成员函数，如果打开文件失败，会返回一个true值。 关闭文件流123ifstream in_file;in_file.open(&quot;input.txt&quot;);in_file.close(); 注: 这里的in_file.close() 中的close是一个成员函数，一般在程序结束是所有之前打开的流都会自动关闭，只有在流变量(这里是in_file)处理另一个文件是，才需要手动关闭。 文件流读入和读出，并判断是否成功读入 文件流读入1234ifstream in_file;in_file.open(&quot;input.txt&quot;);string letter;in_file &gt;&gt; letter; 注：可以看到文件流的读入 in_file &gt;&gt; letter; 于标准读入cin&gt;&gt; letter; 用法相同；不同的是in_file &gt;&gt;letter;是从文本文档 input 中读入，而cin&gt;&gt;letter,是从键盘键入。 文件流读出1234ofstream out_file;out_file.open(&quot;output.txt&quot;);string letter2=&quot;hello world&quot;;out_file &lt;&lt; letter2; 注：可以看到文件流的读出 out_file &lt;&lt; letter2; 于标准读出cout &lt;&lt; letter2; 用法相同；不同的是out_file &lt;&lt; letter2;是将“hello world” 写入文本文档output中，而cout &lt;&lt; letter2,是将“hello world”写入显示屏。 判断是否读入成功123456789101112ifstream in_file;in_file.open(&quot;input.txt&quot;);string letter;in_file &gt;&gt; letter;if(in_file.fail())&#123;​ cout &lt;&lt; &quot;输入错误&quot;；&#125;else&#123;​ 处理输入；&#125; 注：可以看到其用法于cin.fail()用法相同，当输入错误(当试图从文本中读取数字例如：55，但读入的数据项并不是标准的格式化数字例如：55a，则读取失败，in_file.fail()会返回一个true值。 值得说明的是，当从文件读取输入时，数字格式错误并不是失败的唯一原因，假设已经使用了文件中包含的所有数据，并试图读取更多的数据项时，文件流就会进入失败状态，而对于格式输入流cin就会一直等待用户输入。因此当一个输入流文件中的数据类型均为数值，我们想要计算其均值，即可直接使用如下语句： 1234567891011ifstream in_file；in_file.open(input.txt);double tatol=0;double num1=0;double num;while(in_file&gt;&gt;num)&#123; tatol+=num; num1++;&#125;int average = tatol/num1; 举例读取文本文档input.txt中的所有行，并将其按行逆序输出到文本文档output.txt中。 示例代码123456789101112131415161718192021222324252627282930313233343536373839#include &lt;iostream&gt;#include &lt;fstream&gt;#include &lt;vector&gt;using namespace std;int main()&#123; ifstream in_file; in_file.open(&quot;input.txt&quot;);//打开输入流文件 if(in_file.fail())//判断是否成功打开文件 &#123; cout &lt;&lt; &quot;文件打开有误&quot;; &#125; else &#123; ofstream out_file; out_file.open(&quot;output.txt&quot;);//打开输出流文件 vector&lt;string&gt; letter; string word; while(getline(in_file,word))//文件流读入，getline为按行读入，当读取完全部数据返回false &#123; if(in_file.fail())//判断是否读入成功 &#123; cout &lt;&lt; &quot;数据类型不符，读入错误&quot;; &#125; else &#123; letter.push_back(word);//按行存储文件中的内容 &#125; &#125; for(int i=letter.size()-1;i&gt;=0;i--) &#123; out_file &lt;&lt; letter[i]&lt;&lt;endl;//文件流读出 &#125; in_file.close();//关闭输入流文件 out_file.close();//关闭输出流文件 &#125;&#125; ​","tags":[{"name":"C++流","slug":"C-流","permalink":"http://example.com/tags/C-%E6%B5%81/"}]},{"title":"从宏观上看C++流","date":"2021-06-04T10:12:49.000Z","path":"2021/06/04/C-流/","text":"C++流主要是通过输入流和输出流来读写文件，其对于处理真实世界的数据是一个非常实用的技巧,以下来对其进行详细的介绍。 什么是C++流C++的流是一种数据的载体，通过它可以实现数据交换和传输。就像水流是由一串水组成的一样，C++的数据流就是由一串数据组成的更长数据。简单来说，C++流就是输入和输出，其中输入流就是数据从键盘、文件或者是指定字符串流入到程序中；输出流就是程序中的数据流向屏幕、文件或字符串。 C++中的输入流和输出流 通过标准输入设备——键盘（C++中使用cin），或标准输出设备——显示器（C++中使用cout）进行输入和输出操作，简称为标准I/O。 通过对文件进行输入和输出操作，简称为文件I/O。 通过对程序中的指定字符串进行输入和输出操作，简称为串I/O。 C++中输入输出流使用的头文件 标准输入输出：#include &lt;iostream&gt; 文件输入输出： #include &lt;fstream&gt; 串输入输出： #include &lt;sstream&gt; 为什么要使用C++流 毫无疑问，一个有意义的程序一定会有程序本身想要的输入，和你所想看到的输出，这是一个程序最本质的意义。 对于标准输入输出流：在所需要输入的数据比较简单，数量少，输出的数据也比较简单，并且是一个即时的数据，使用标准输入输出流是有很大裨益的。 对于文件输入输出流： 在所需要的数据很庞大，并且在文件中有着一定的规律（例如表格），使用文件输入流很有必要。 在需要对程序进行大量的测试，需要对同样或者大部分相同的数据进行输入，使用文件流可节省很多时间。 通过文件输入输出流可以对文件进行加密以保护文件的安全。 对于串输入输出流： 以字符串作为输入可以实现从字符串到数值型数据的转变。 当需要从一个长字符串中提取一些想要的信息，使用串输入输出流是比较方便的（例：从 “2021 年 6 月 1 日“中提取月份，即可将此长字符串作为一个输入流，依次读入到第三个数据即为月份）。 C++流我们应该学到什么 对于文件输入输出流的使用即读写文本文件。 对于串输入输出流的使用即读写字符串。 文件加密。 文件输入输出流的随机访问。 处理BMP格式的图像文件。 友情提示：若要详细学习C++流的5点内容，请点击标签中的C++流。","tags":[{"name":"C++流","slug":"C-流","permalink":"http://example.com/tags/C-%E6%B5%81/"}]},{"title":"C++操作图像中的像素-Picture类","date":"2021-06-04T09:45:23.670Z","path":"2021/06/04/C-操作图像中的像素/","text":"​ 数字图像由像素组成，在C++中操作图像即是对图像中的某些或全部像素的操作，下介绍使用picture类型对图片像素进行操作。 如何使用picture类型 将文件picture.cpp、picture.h、lodepng.cpp和lodepng.h复制到用户的源文件所在文件夹（注：文件可在wiley.com./go/bclo3中的配套代码下的ch04/worked_example_2下找到），如下图： 在工作空间中打开它们，具体步骤：右键picture-&gt;添加文件-&gt;同时打开4个文件，然后编译器会弹出信息，点击确定即可，打开之后如下图： 在头文件中使用如下语句：#include “picture.h”,注：picture.h应由引号而不是尖括号括起来。 将要处理的图片复制到源文件所在的文件夹，图片名称为queen注：图片的类型必需为png类型。 打开图片，使用如下代码：Picture pic(“queen.png”)。 ​ 该语句定义了一个Picture 类型的变量 pic，用于保存图片的像素。 ​ 图片中每一个像素都有x和y坐标，其中0&lt;=x&lt;pic.width()(即图片的宽度)，0&lt;=y&lt;pic.height()(即图片的高度);例如(0,0)就位于图片的左上角，且y轴向下。 ​ 对于每一个像素都有一个RGB颜色值，该值由三原色组成：红、绿、蓝。每一个原色值都在0~255之间，所以我们操作图片中的像素即通过改变像素的颜色值来达到我们的目的。 Picture类型部分成员函数 pic.width() 和 pic.height() ； 分别用来访问图片的的宽度和高度。 pic.red(x,y)、pic.blue(x,y) 和 pic.green(x,y) ； 分别用来获取像素(x,y)处红色原色值、蓝色原色值以及绿色原色值。 pic.set(x,y,red,green,bule)； 将像素(x,y)处设定为自定义原色值，其中后3个参数均为0~255之间的数值。 Picture pic2(“queen2.png”); pic.add(pic2,num1,num2); 这是在图片pic中添加图片pic2，其中num1，num2 分别为pic2相对于(0,0)这个位置的位移。 pic.save(“result.png”)； 将操作后的图片保存。注：会在源文件中生成一个名为result，类型为png的图片。 Picture pic3(num1,num2,num3,num4,num5); 不从源文件中加载图片，生成一张单色的图片，其中num1,num2 分别指定图片的宽度的高度，num3、num4、num5 分别代表着图片每一个像素的红、绿、蓝原色值。 举例：编写程序，将图片queen中的每一个像素的个原色值都变成其相反值。 示例代码：123456789101112131415161718192021#include &lt;iostream&gt;#include &quot;picture.h&quot;using namespace std;int main()&#123; Picture pic(&quot;queen.png&quot;); for(int i=0;i&lt;pic.height();i++) &#123; for(int j=0;j&lt;pic.width();j++) &#123; int red=pic.red(j,i); int green = pic.green(j,i); int bule=pic.blue(j,i); pic.set(j,i,255-red,255-green,255-bule); &#125; &#125; pic.save(&quot;upset_down.png&quot;); return 0;&#125;","tags":[{"name":"C++_picture","slug":"C-picture","permalink":"http://example.com/tags/C-picture/"}]}]